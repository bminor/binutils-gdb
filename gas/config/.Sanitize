# .Sanitize for devo/gas/config

# Each directory to survive its way into a release will need a file
# like this one called "./.Sanitize".  All keyword lines must exist,
# and must exist in the order specified by this file.  Each directory
# in the tree will be processed, top down, in the following order.

# Hash started lines like this one are comments and will be deleted
# before anything else is done.  Blank lines will also be squashed
# out.

# The lines between the "Do-first:" line and the "Things-to-keep:"
# line are executed as a /bin/sh shell script before anything else is
# done in this 

Do-first:

d30v_files="tc-d30v.c tc-d30v.h"

if ( echo $* | grep keep\-d30v > /dev/null ) ; then
	keep_these_too="${d30v_files} ${keep_these_too}"
else
	lose_these_too="${d30v_files} ${lose_these_too}"
fi

tic80_files="tc-tic80.c tc-tic80.h"

if ( echo $* | grep keep\-tic80 > /dev/null ) ; then
	keep_these_too="${tic80_files} ${keep_these_too}"
else
	lose_these_too="${tic80_files} ${lose_these_too}"
fi

# All files listed between the "Things-to-keep:" line and the
# "Files-to-sed:" line will be kept.  All other files will be removed.
# Directories listed in this section will have their own Sanitize
# called.  Directories not listed will be removed in their entirety
# with rm -rf.

Things-to-keep:

aout_gnu.h
atof-ieee.c
atof-tahoe.c
atof-vax.c
go32.cfg
e-i386coff.c
e-i386elf.c
e-mipsecoff.c
e-mipself.c
itbl-mips.h
m68k-parse.h
m68k-parse.y
m88k-opcode.h
obj-aout.c
obj-aout.h
obj-bout.c
obj-bout.h
obj-coff.c
obj-coff.h
obj-ecoff.c
obj-ecoff.h
obj-elf.c
obj-elf.h
obj-evax.c
obj-evax.h
obj-generic.c
obj-generic.h
obj-hp300.c
obj-hp300.h
obj-ieee.c
obj-ieee.h
obj-multi.c
obj-multi.h
obj-som.c
obj-som.h
obj-vms.c
obj-vms.h
tc-a29k.c
tc-a29k.h
tc-alpha.c
tc-alpha.h
tc-arc.c
tc-arc.h
tc-arm.c
tc-arm.h
tc-d10v.c
tc-d10v.h
tc-generic.c
tc-generic.h
tc-h8300.c
tc-h8300.h
tc-h8500.c
tc-h8500.h
tc-hppa.c
tc-hppa.h
tc-i386.c
tc-i386.h
tc-i860.c
tc-i860.h
tc-i960.c
tc-i960.h
tc-m32r.c
tc-m32r.h
tc-m68851.h
tc-m68k.c
tc-m68k.h
tc-m88k.c
tc-m88k.h
tc-mips.c
tc-mips.h
tc-mn10200.c
tc-mn10200.h
tc-mn10300.c
tc-mn10300.h
tc-ns32k.c
tc-ns32k.h
tc-ppc.c
tc-ppc.h
tc-sh.c
tc-sh.h
tc-sparc.c
tc-sparc.h
tc-tahoe.c
tc-tahoe.h
tc-v850.c
tc-v850.h
tc-vax.c
tc-vax.h
tc-w65.c
tc-w65.h
tc-z8k.c
tc-z8k.h
te-386bsd.h
te-aux.h
te-delta.h
te-delt88.h
te-dpx2.h
te-dynix.h
te-generic.h
te-go32.h
te-hp300.h
te-hppa.h
te-i386aix.h
te-ic960.h
te-linux.h
te-lnews.h
te-lynx.h
te-mach.h
te-macos.h
te-multi.h
te-nbsd.h
te-nbsd532.h
te-pc532mach.h
te-pe.h
te-ppcnw.h
te-psos.h
te-riscix.h
te-sparcaout.h
te-sun3.h
te-svr4.h
te-sysv32.h
vax-inst.h
vms-conf.h
vms-a-conf.h

Things-to-lose:

vms

Do-last:

r5900_files="tc-mips.c"

if ( echo $* | grep keep\-r5900 > /dev/null ) ; then
	for i in $r5900_files ; do
		if test ! -d $i && (grep sanitize-r5900 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Keeping r5900 stuff in $i
			fi
		fi
	done
else
	for i in * ; do
		if test ! -d $i && (grep sanitize-r5900 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Removing traces of \"r5900\" from $i...
			fi
			cp $i new
			sed '/start\-sanitize\-r5900/,/end\-sanitize\-r5900/d' < $i > new
			if [ -n "${safe}" -a ! -f .Recover/$i ] ; then
				if [ -n "${verbose}" ] ; then
					echo Caching $i in .Recover...
				fi
				mv $i .Recover
			fi
			mv new $i
		fi
	done
fi

tx19_files="tc-mips.c"

if ( echo $* | grep keep\-tx19 > /dev/null ) ; then
	for i in $tx19_files ; do
		if test ! -d $i && (grep sanitize-tx19 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Keeping tx19 stuff in $i
			fi
		fi
	done
else
	for i in * ; do
		if test ! -d $i && (grep sanitize-tx19 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Removing traces of \"tx19\" from $i...
			fi
			cp $i new
			sed '/start\-sanitize\-tx19/,/end\-sanitize\-tx19/d' < $i > new
			if [ -n "${safe}" -a ! -f .Recover/$i ] ; then
				if [ -n "${verbose}" ] ; then
					echo Caching $i in .Recover...
				fi
				mv $i .Recover
			fi
			mv new $i
		fi
	done
fi

tic80_files="obj-coff.h"

if ( echo $* | grep keep\-tic80 > /dev/null ) ; then
	for i in $tic80_files ; do
		if test ! -d $i && (grep sanitize-tic80 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Keeping tic80 stuff in $i
			fi
		fi
	done
else
	for i in * ; do
		if test ! -d $i && (grep sanitize-tic80 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Removing traces of \"tic80\" from $i...
			fi
			cp $i new
			sed '/start\-sanitize\-tic80/,/end\-sanitize\-tic80/d' < $i > new
			if [ -n "${safe}" -a ! -f .Recover/$i ] ; then
				if [ -n "${verbose}" ] ; then
					echo Caching $i in .Recover...
				fi
				mv $i .Recover
			fi
			mv new $i
		fi
	done
fi

if [ -n "${verbose}" ] ; then
	echo Processing \"sh4\"...
fi

sh4_files="tc-sh.c"
if ( echo $* | grep keep\-sh4 > /dev/null ) ; then
	for i in $sh4_files ; do
		if test ! -d $i && (grep sanitize-sh4 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Keeping sh4 stuff in $i
			fi
		fi
	done
else
	for i in $sh4_files ; do
		if test ! -d $i && (grep sanitize-sh4 $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Removing traces of \"sh4\" from $i...
			fi
			cp $i new
			sed -e '/start\-sanitize\-sh4/,/end-\sanitize\-sh4/d' -e 's/.*restore\-sanitize\-sh4//' < $i > new
			if [ -n "${safe}" -a ! -f .Recover/$i ] ; then
				if [ -n "${verbose}" ] ; then
					echo Caching $i in .Recover...
				fi
				mv $i .Recover
			fi
			mv new $i
		fi
	done
fi

v850e_files="tc-v850.c tc-v850.h"
if ( echo $* | grep keep\-v850e > /dev/null ) ; then
	for i in $v850e_files ; do
		if test -r $i && (grep sanitize-v850e $i > /dev/null) ; then
			if [ -n "${verbose}" ] ; then
				echo Removing traces of \"v850e\" from $i...
			fi
			cp $i new
			sed '/start\-sanitize\-v850e/,/end\-sanitize\-v850e/d' < $i > new
			if [ -n "${safe}" -a ! -f .Recover/$i ] ; then
				if [ -n "${verbose}" ] ; then
					echo Caching $i in .Recover...
				fi
				mv $i .Recover
			fi
			mv new $i
		fi
	done
fi

# End of file.
