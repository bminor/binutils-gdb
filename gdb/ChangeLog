Sun Jan 16 12:46:01 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (process_xcoff_symbol): Only change 'V' to 'S' if not
	within_function.

	* Makefile.in: Add mostlyclean target.

Sat Jan 15 10:20:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Version 4.11.4.

Sat Jan 15 18:27:34 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* main.c (show_commands):  Make return type of extern
	history_get be HIST_ENTRY, rather than struct _hist_entry.
	(The latter loses with the upcoming merged readline.)

Sat Jan 15 10:20:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* minsyms.c (prim_record_minimal_symbol_and_info): Make tempstring
	const char *, not char *.

	* symtab.h (struct symbol): Make section short, not unsigned short.

	* symtab.c (lookup_symbol): Add comment about QUIT here.

	* utils.c (fputs_unfiltered): Call fputs, not fputs_maybe_filtered.

	* c-exp.y (parse_number): Check for overflow regardless of range
	checking.  Fix overflow check to use unsigned LONGEST, not
	unsigned int.

	* c-exp.y (parse_number): Make it so that integer constants are
	builtin_type_long_long if builtin_type_long isn't big enough or if
	an "LL" suffix is used.  Properly handle "UL" or "LU" suffixes.

	* c-typeprint.c (c_type_print_varspec_suffix, case TYPE_CODE_FUNC):
	Print our "()" first, then recurse for the target type.

Fri Jan 14 21:55:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-udi.c (udi_create_inferior): Quote empty execfile argument.

	* gdbserver/low-lynx.c: Include <sys/wait.h> not "/usr/include/wait.h".

Fri Jan 14 14:17:06 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (request_quit): Re-establish signal handler regardless
	of USG.

	* config/mips/xm-irix4.h: Define HAVE_TERMIOS.

Fri Jan 14 21:55:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i960-tdep.c: Include target.h.

Fri Jan 14 17:12:28 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* lynx-nat.c (sys/wait.h): Don't use absolute pathname.

Fri Jan 14 11:06:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* lynx-nat.c (child_wait): Fix thinkos in struct target_waitstatus
	changes (status -> ourstatus; declare status, etc.).
	* config/nm-lynx.h: Fix child_wait prototype and include target.h.

Fri Jan 14 14:17:06 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (ALLPARAM): Add config/nm-lynx.h.

Fri Jan 14 11:49:44 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* remote-mips.c (mips_request, mips_wait): Correct prototypes.

Fri Jan 14 11:37:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/i386/xm-linux.h: Define HAVE_TERMIOS.

Fri Jan 14 01:04:36 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/alpha/tm-alpha.h (CALL_DUMMY):  Improve comment.

Thu Jan 13 10:32:38 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-vx.c (vx_wait): Only call i960_fault_to_signal if I80960
	is defined.  Otherwise just report TARGET_SIGNAL_UNKNOWN.

	* mips-tdep.c (mips_push_arguments): Byteswap struct_addr before
	writing it.

	Add search to target vector (#if 0'd until after 4.12):
	* target.h (to_search, target_search): Add.
	* gdbcore.h, core.c (generic_search): Add.
	* remote.c (remote_search): Add.
	* a29k-tdep.c (init_frame_info): Use target_search to find traceback
	tag.

	* printcmd.c (print_address_symbolic): If set print fast-symbolic-addr
	is on, call find_pc_function rather than relying just on the minimal
	symbols (probably only matters for symbol readers which don't put
	statics in the minimal symbols, but changing this strikes me as
	not conservative enough).
	Initialize name_location in all cases.
	If no symbol and no msymbol, don't print anything symbolic.

	* a29k-tdep.c (push_dummy_frame): Add comment about saving lr0.

Wed Jan 12 20:53:16 1994  John Gilmore  (gnu@cygnus.com)

	* printcmd.c (print_address_symbolic):  Make it search the
	symtabs for variables as well as functions.  Add `set print
	fast-symbolic-addr' and default it to fast (the old way).
	Print line numbers for data items as well as functions.

	* symtab.c (find_addr_symbol):  Return the symtab and the symbol
	address, if a symbol is found (take two more args pointing to
	where to store these results).

	* symtab.h (find_addr_symbol):  Add prototype.

Wed Jan 12 19:32:11 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* objfiles.h: Fix comments to reflect the fact that the phrase
	"top of stack" always refers to where the pushing and popping takes
	place, regardless of whether it is at the highest or lowest address.

Wed Jan 12 13:23:37 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_symbol):  Do not set TYPE_TAG_NAME for
	compiler generated tag names.
	* mdebugread.c (parse_type):  Handle cross references to qualified
	aggregate types.
	* valops.c (value_struct_elt):  Improve error message if the
	address of a method is requested from an object instance.
	* valops.c (search_struct_method):  Make name_matched non-static
	to get it initialized correctly.
	* config/i386/nm-i386sco.h (CANNOT_STORE_REGISTER):  Define to
	exclude segment register which are not writable on newer SCO versions.

Wed Jan 12 14:44:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* go32-xdep.c: Remove unused function uerror.
	(sigsetmask): Declare return type.  Declare argument (to match the
	way it is called).  Explicitly return 0.

Wed Jan 12 01:44:25 1994  John Gilmore  (gnu@cygnus.com)

	* symtab.h (struct symbol, general_symbol_info, minimal_symbol,
	partial_symbol):  Shrink the storage sizes of symbols, by making
	enums into 1-byte bitfields when compiled __GNUC__, moving all the
	enums and small ints to the end of each struct to improve
	alignment, and switching the section number from int to unsigned
	short.

Wed Jan 12 00:16:26 1994  John Gilmore  (gnu@cygnus.com)

	* symtab.c (find_addr_symbol):  New routine that will find the nearest
	symbol associated with an address.  It does so by exhaustive
	search of the symtabs, so it's slow but complete.

Tue Jan 11 23:57:30 1994  John Gilmore  (gnu@cygnus.com)

	* coffread.c (read_coff_symtab):  Set PC bounds of _globals_ symtab
	to [0,0] rather than [0, end of first source file].  This avoids
	problems with other parts of GDB looking for linetables in the
	_globals_ symtab.  Eliminate variables num_object_files and
	first_object_file_end.

Tue Jan 11 00:53:46 1994  John Gilmore  (gnu@cygnus.com)

	* a29k-tdep.c (init_frame_info):  Cast null arg to examine_tag.
	(pop_frame):  Restore PC2 and LR0 from dummy frames.
	(push_dummy_frame):  Save PC2 and LR0 into dummy frames.
	(setup_arbitrary_frame):  Handle 3 args and set up real frames.
	* config/a29k/tm-a29k.h (FRAME_NUM_ARGS):  Update comments.
	(DUMMY_FRAME_RSIZE):  Add 2 longwords for PC2 and LR0.
	(SETUP_ARBITRARY_FRAME):  Define.

Tue Jan 11 06:59:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* infrun.c, config/mips/tm-irix5.h: Remove #if 0'd AT_FUNCTION_START.

Tue Jan 11 14:27:03 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* remote-udi.c (udi_resume): Correct prototype.

Tue Jan 11 11:10:30 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

        * config/pa/tm-hppa.h (FRAME_FIND_SAVED_REGS): Call
	hppa_frame_find_saved_regs.
	* hppa-tdep.c (dig_fp_from_stack): Delete function.
	(prologue_inst_adjust_sp): New function.
	(is_branch, inst_saves_gr, inst_saves_fr): New functions.
	(skip_prologue): Completely rewrite to use unwind information.
	(hppa_frame_find_saved_regs): Likewise.

Tue Jan 11 06:59:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote-mips.c (mips_wait): Use new function mips_signal_from_protocol
	to convert a signal number with appropriate bounds checking.

	* remote-mips.c (mips_wait): Fix typos (0x177 -> 0177, 0x377 -> 0377).

Tue Jan 11 00:53:46 1994  John Gilmore  (gnu@cygnus.com)

	* stack.c (frame_info):  If FRAME_FIND_SAVED_REGS isn't defined,
	print a newline to end the display anyway.

	* sparc-tdep.c (sparc_pop_frame):  Pop the fsr and csr (float and
	coprocessor status regs) when popping a frame.  This fixes 
	float exceptions that occur after calling inferior functions.

	* sparc-nat.c (fetch_inferior_registers, store_inferior_registers):
	Read and write the fsr (float status register) to/from the child
	process along with the float regs.  Remove Peter Schauer's change
	of May 24 '93, which has higher overhead and doesn't solve the
	real problem (which was that FSR wasn't being set).

Mon Jan 10 23:16:42 1994  John Gilmore  (gnu@cygnus.com)

	* a29k-tdep.c (examine_prologue):  Don't worry if the ASGEQ
	stack overflow check isn't right after the register stack
	adjustment instruction.  Metaware R2.3u compiler moves other
	things in front of it.  This fix isn't perfect but is what's
	running.

Mon Jan 10 20:08:23 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* c-valprint.c (c_val_print): Treat TYPE_CODE_RANGE like TYPE_CODE_INT.

	* config/alpha/alpha-netware.mt: Rename to alpha-nw.mt for 14
	character filenames.
	* configure.in: Change accordingly.

Mon Jan 10 15:48:36 1994  Tom Lord  (lord@rtl.cygnus.com)

	* m68k-stub.c, sparc-stub.c: removed spurious introduction of 
	_filtered io routines from these two files.

Fri Jan  7 12:42:45 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/i386/tm-i386v.h, config/m68k/tm-m68k.h, config/mips/tm-mips.h,
	config/vax/tm-vax.h (CALL_DUMMY_BREAKPOINT_OFFSET):  Define.
	* mdebugread.c (parse_symbol):  Handle enum sh.type produced by
	DEC c89. 
	* mdebugread.c (add_line):  Handle zero linenos produced by DEC c89.

Fri Jan  7 12:55:25 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (print_sys_errmsg): Call gdb_flush (gdb_stdout) before
	printing to gdb_stderr.

	* remote-udi.c (udi_kill): Don't close the connection, just set
	inferior_pid to zero.
	(udi_mourn): Call remove_breakpoints.

	* remote-udi.c: Remove obsolete need_artificial_traps comment.

	* i386b-nat.c (sregmap): If sEAX, etc., not defined, use tEAX, etc.

Thu Jan  6 07:17:53 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* symtab.c (lookup_symbol): Don't try adding .c to the name.

	* remote-bug.c: At the start of each section, reset srec_frame
	back to 160.

	* target.h: Add TARGET_WAITKIND_LOADED and TARGET_WAITKIND_SPURIOUS.
	* target.c (store_waitstatus): Add CHILD_SPECIAL_WAITSTATUS hook.
	* infrun.c (wait_for_inferior): Replace SIGTRAP_STOP_AFTER_LOAD with
	code which looks for those two waitkinds.  Use switch statement.
	* config/rs6000/tm-rs6000.h: Replace SIGTRAP_STOP_AFTER_LOAD with
	CHILD_SPECIAL_WAITSTATUS.

	* procfs.c (procfs_wait): Fix argument name to match 4 Jan changes.
	* Move target_signal_from_host, target_signal_to_host, and
	store_waitstatus from inftarg.c to target.c.  procfs needs them.
	* target.c: Include "wait.h" and <signal.h>.
	* target.h, infrun.c (proceed), proceed callers: Pass new code
	TARGET_SIGNAL_DEFAULT instead of -1.  This avoids problems with
	enums being treated as unsigned and is cleaner.
	* infrun.c (signals_info): Don't print TARGET_SIGNAL_DEFAULT or
	TARGET_SIGNAL_0.
	* infcmd.c (signal_command), infrun.c (signals_info):
	Don't allow user to specify numeric equivalent of
	TARGET_SIGNAL_DEFAULT.

Tue Jan  4 15:34:36 1994  Stu Grossman  (grossman@cygnus.com)

	* config/alpha/alpha-netware.mt:  New target support for Alpha
	running Netware.
	* configure.in:  Add alpha-*-netware* target.

Tue Jan  4 14:51:35 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* remote-mips.c (mips_wait): Fix ref to TARGET_WAITKIND_STOPPED.

Tue Jan  4 09:47:14 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* target.h: Add enum target_waitkind, enum target_signal, and
	struct target_waitstatus.  Change status argument to target_wait to
	be struct target_waitstatus * instead of int *.
	* target.h, infrun.c, all targets: Change type of signal arguments
	to resume(), proceed(), and target_resume() from int to enum
	target_signal.
	* All targets (*_wait, *_resume): Change accordingly.
	* infcmd.c (program_info, signal_command), throughout infrun.c, 
	* fork-child.c, solib.c, hppa-tdep.c, osfsolib.c: Use this stuff.
	* convex-xdep.c, convex-tdep.c: Add FIXME's (getting the Convex
	signal code stuff right with the new signals would be non-trivial).
	* inferior.h (stop_signal): Make it enum target_signal not int.
	* target.c, target.h (target_signal_to_string, target_signal_to_name,
	target_signal_from_name): New functions.
	* inftarg.c, target.h (target_signal_to_host, target_signal_from_host,
	store_waitstatus): New functions.
	* procfs.c (procfs_notice_signals): Use them.
	* i960-tdep.c (i960_fault_to_signal): New function, to replace
	print_fault.
	* config/i960/tm-i960.h: Don't define PRINT_RANDOM_SIGNAL.

	* objfiles.c (build_objfile_section_table): Don't abort() if
	objfile->sections is already set.

	* objfiles.c (add_to_objfile_sections): Check SEC_ALLOC not SEC_LOAD
	to match recent change to exec.c.

	* Version 4.11.3.

	* main.c (print_gdb_version): Change year to 1994.

	* ChangeLog, ChangeLog-93: Split ChangeLog at 1994.
	* Makefile.in (NONSRC): Add ChangeLog-93.

Mon Jan  3 11:57:29 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (read_type): Allow defining several type numbers
	at once (e.g. "(1,2)=(3,4)="...).

	* stabsread.c (read_enum_type): Use TARGET_INT_BIT not sizeof (int).

	* breakpoint.c (frame_in_dummy): Check PC as well as frame.

Mon Jan  3 02:47:03 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (psymtab_to_symtab_1):  Only pass N_STAB symbols
	to process_one_symbol.
	* symtab.c (find_pc_psymbol):  Search global_psymbols as well to
	avoid caching a bad endaddr in find_pc_partial_function.

Sun Jan  2 21:41:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/tm-sun3.h: Don't define BELIEVE_PCC_PROMOTION.

Sat Jan  1 04:35:23 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (wait_for_inferior):  Do not step or step resume past
	the end of a one-line function we just stepped into.

For older changes see ChangeLog-93

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
